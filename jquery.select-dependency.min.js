/* Copyright (c) 2016 Vincent Guyard (vguyard@onaxis.cl) http://www.onaxis.cl
 * Licensed under GPL (http://www.opensource.org/licenses/gpl-2.0.php)
 * Use only for non-commercial usage.
 */
!function(t){jQuery.fn.SelectDependency=function(a){var e={onchange:function(){},all_value:"-1",show_all:!1};t.extend(e,a);return this.filter("[data-sd_group]").size()?this:(document.group_id=document.group_id?document.group_id+1:1,this.data("sd_group",document.group_id).attr("data-sd_group",document.group_id),this.each(function(){this.SelectDependencyBackup=t(this).clone(),t(this).on("change",function(){if(!t("body").hasClass("sd_lock")){t("body").addClass("sd_lock");var a=t(this),o=t("[data-sd_group="+a.data("sd_group")+"]");if(o.each(function(){var a=t(this).val();t(this).html(this.SelectDependencyBackup.html()),t(this).val(a)}),o.each(function(){var e=t(this).data("impact");if(e){var o=a.find("option:selected").data(e);o&&t(this).val(o)}}),e.show_all&&a.val()==e.all_value)return t("body").removeClass("sd_lock");o.find("option[data-"+a.data("impact")+"][data-"+a.data("impact")+"!="+a.val()+"]").remove(),t.proxy(e.onchange,this)(),t("body").removeClass("sd_lock")}})}).first().trigger("change"),this)}}(jQuery);